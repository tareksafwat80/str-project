<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STR - Summit Team Real Estate | Enterprise System</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* CSS متقدم وتفصيلي جداً */
        :root {
            --gold: #d4af37;
            --black: #050505;
            --zinc-900: #121214;
            --zinc-800: #202023;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--black);
            color: white;
            margin: 0;
            overflow-x: hidden;
        }

        /* Hero Animation */
        .hero-title {
            animation: slideUp 1s ease-out;
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Glassmorphism Classes */
        .glass-card {
            background: rgba(24, 24, 27, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(212, 175, 55, 0.1);
            transition: all 0.4s ease;
        }
        .glass-card:hover {
            border-color: var(--gold);
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--black); }
        ::-webkit-scrollbar-thumb { background: var(--gold); border-radius: 10px; }

        /* Tab Transitions */
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.6s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Admin UI Extensions */
        .sidebar-item {
            padding: 15px 25px;
            cursor: pointer;
            border-radius: 15px;
            margin-bottom: 8px;
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
            color: #888;
        }
        .sidebar-item.active {
            background: var(--gold);
            color: black;
            font-weight: 900;
        }

        .input-luxury {
            background: #000;
            border: 1px solid #333;
            color: white;
            padding: 15px 20px;
            border-radius: 15px;
            width: 100%;
            outline: none;
            transition: 0.3s;
        }
        .input-luxury:focus { border-color: var(--gold); }

        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.95);
            z-index: 1000;
            overflow-y: auto;
            padding: 40px;
        }
    </style>
</head>
<body>

    <nav class="fixed top-0 w-full z-[100] bg-black/80 backdrop-blur-md border-b border-zinc-900">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-10">
                <img src="https://i.imgur.com/uVpX5Xp.png" class="h-16 cursor-pointer" onclick="switchTab('home')">
                <div class="hidden md:flex gap-6">
                    <span class="nav-link cursor-pointer font-bold hover:text-gold transition" onclick="switchTab('home')">الرئيسية</span>
                    <span class="nav-link cursor-pointer font-bold hover:text-gold transition" onclick="switchCategory('resale')">ريسيل</span>
                    <span class="nav-link cursor-pointer font-bold hover:text-gold transition" onclick="switchCategory('primary')">برايمري</span>
                </div>
            </div>
            <button onclick="openAdmin()" class="bg-red-600/10 text-red-500 border border-red-900/30 px-6 py-2 rounded-xl text-sm font-black">لوحة التحكم</button>
        </div>
    </nav>

    <main class="mt-24">
        
        <section id="tab-home" class="tab-content active h-[85vh] flex items-center justify-center text-center">
            <div class="hero-title">
                <h1 class="text-7xl md:text-[120px] font-black italic text-[#d4af37] mb-4">SUMMIT TEAM</h1>
                <h2 class="text-3xl md:text-5xl font-bold tracking-[20px] uppercase text-white/90">Real Estate</h2>
                <div class="h-1 w-40 bg-gold mx-auto my-10 rounded-full"></div>
                <p id="display-slogan" class="text-zinc-500 text-xl md:text-3xl italic max-w-4xl mx-auto leading-relaxed"></p>
                <div class="mt-12 flex justify-center gap-6">
                    <button onclick="switchCategory('resale')" class="bg-gold text-black px-12 py-5 rounded-2xl font-black text-xl hover:scale-105 transition">ابدأ البحث</button>
                </div>
            </div>
        </section>

        <section id="tab-inventory" class="tab-content py-20 container mx-auto px-6">
            <div class="flex flex-col md:flex-row justify-between items-end mb-16 gap-6">
                <div>
                    <h3 id="category-name" class="text-5xl font-black text-gold italic mb-4 uppercase">RESALE UNITS</h3>
                    <p class="text-zinc-500 font-bold uppercase tracking-widest">Premium Collection By STR</p>
                </div>
                <div class="relative w-full md:w-96">
                    <input type="text" id="search-box" oninput="runSearch()" placeholder="بحث برقم الكود أو المنطقة..." class="w-full bg-zinc-900 border border-zinc-800 p-4 pr-12 rounded-2xl outline-none focus:border-gold">
                    <i class="fa fa-search absolute right-4 top-5 text-zinc-600"></i>
                </div>
            </div>
            <div id="units-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-10">
                </div>
        </section>

    </main>

    <div id="admin-portal" class="modal-overlay">
        <div class="flex h-full gap-10">
            <aside class="w-80 bg-zinc-950 p-8 rounded-[40px] border border-zinc-900 flex flex-col shadow-2xl">
                <img src="https://i.imgur.com/uVpX5Xp.png" class="h-16 mx-auto mb-10">
                <div class="flex-1">
                    <div id="side-inv" onclick="showAdminPage('inventory')" class="sidebar-item active"><i class="fa fa-home"></i> المخزون</div>
                    <div id="side-crm" onclick="showAdminPage('crm')" class="sidebar-item"><i class="fa fa-users"></i> الـ CRM</div>
                    <div id="side-add" onclick="showAdminPage('add')" class="sidebar-item text-green-500"><i class="fa fa-plus-circle"></i> إضافة وحدة</div>
                    <div id="side-set" onclick="showAdminPage('settings')" class="sidebar-item"><i class="fa fa-cog"></i> الإعدادات</div>
                </div>
                <button onclick="location.reload()" class="w-full bg-red-900/10 text-red-500 py-4 rounded-2xl font-black border border-red-900/20">خروج آمن</button>
            </aside>
            <main class="flex-1 bg-zinc-900/50 p-12 rounded-[40px] border border-zinc-900 overflow-y-auto">
                <div id="admin-content"></div>
            </main>
        </div>
    </div>

    <div id="login-screen" class="modal-overlay flex items-center justify-center">
        <div class="bg-zinc-900 p-16 rounded-[60px] border border-gold/10 w-full max-w-lg text-center shadow-2xl">
            <img src="https://i.imgur.com/uVpX5Xp.png" class="h-24 mx-auto mb-12">
            <div class="space-y-4">
                <input id="user-in" type="text" placeholder="اسم المستخدم" class="input-luxury text-center">
                <input id="pass-in" type="password" placeholder="كلمة المرور" class="input-luxury text-center">
                <button onclick="tryLogin()" class="w-full bg-gold text-black py-5 rounded-2xl font-black text-2xl">دخول النظام</button>
            </div>
            <p onclick="closeAll()" class="mt-8 text-zinc-600 cursor-pointer font-bold">إلغاء</p>
        </div>
    </div>

    <a href="https://wa.me/201159333060" class="fixed bottom-10 left-10 bg-[#25D366] w-20 h-20 rounded-full flex items-center justify-center text-4xl shadow-2xl z-[1000]"><i class="fab fa-whatsapp"></i></a>

    <script>
        // --- 1. State Management ---
        const DB = {
            settings: { slogan: "STR - قمة العقارات في مصر. نحن لا نبيع مجرد جدران، نحن نصنع مستقبلك الاستثماري والسكني بأعلى معايير الجودة والاحترافية | 2026" },
            units: [],
            leads: [],
            agents: [
                { id: 1, name: "إدارة STR", user: "admin", pass: "str2026", load: 0 },
                { id: 2, name: "فريق Sales A", user: "sales1", pass: "123", load: 0 },
                { id: 3, name: "فريق Sales B", user: "sales2", pass: "123", load: 0 }
            ],
            currentUser: null,
            activeCat: 'resale'
        };

        // --- 2. Data Initialization (The Core) ---
        function initializeSystem() {
            const areas = ["مدينتي B8", "الرحاب 2", "التجمع الخامس", "نرجس عمارات", "R7 العاصمة"];
            const imgs = [
                "https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=800",
                "https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800",
                "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=800"
            ];

            // Generating 24 Sample Units
            for (let i = 1; i <= 24; i++) {
                DB.units.push({
                    id: Date.now() + i,
                    code: 1000 + i,
                    title: `وحدة سكنية مميزة #${1000+i}`,
                    area: areas[i % areas.length],
                    price: 3800000 + (i * 150000),
                    space: 120 + (i * 2),
                    rooms: 3,
                    type: i <= 12 ? 'resale' : 'primary',
                    img: imgs[i % 3]
                });
            }
            document.getElementById('display-slogan').innerText = DB.settings.slogan;
            renderGrid();
        }

        // --- 3. UI Switches ---
        window.switchTab = (tab) => {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById('tab-' + tab).classList.add('active');
            window.scrollTo(0,0);
        };

        window.switchCategory = (cat) => {
            DB.activeCat = cat;
            document.getElementById('category-name').innerText = cat === 'resale' ? 'وحدات الريسيل' : 'وحدات البرايمري';
            switchTab('inventory');
            renderGrid();
        };

        // --- 4. Rendering Engine ---
        function renderGrid(filtered = null) {
            const grid = document.getElementById('units-grid');
            const data = filtered || DB.units.filter(u => u.type === DB.activeCat);
            
            grid.innerHTML = data.map(u => `
                <div class="glass-card rounded-[40px] overflow-hidden group">
                    <div class="h-64 relative overflow-hidden">
                        <img src="${u.img}" class="w-full h-full object-cover group-hover:scale-110 transition duration-700">
                        <div class="absolute top-5 right-5 bg-black/70 backdrop-blur-md px-4 py-1 rounded-full text-[10px] text-gold font-black border border-gold/20">CODE: ${u.code}</div>
                    </div>
                    <div class="p-8">
                        <p class="text-zinc-500 text-[10px] font-black uppercase tracking-[3px] mb-2">${u.area}</p>
                        <h4 class="text-3xl font-black mb-6">${u.price.toLocaleString()} <span class="text-xs gold-text">EGP</span></h4>
                        <div class="flex justify-between py-4 border-y border-zinc-800/50 text-xs text-zinc-400 font-bold mb-8">
                            <span><i class="fa fa-expand gold-text ml-2"></i>${u.space} م²</span>
                            <span><i class="fa fa-bed gold-text ml-2"></i>${u.rooms} غرف</span>
                        </div>
                        <button onclick="handleLead(${u.code})" class="w-full bg-zinc-800 group-hover:bg-gold group-hover:text-black py-4 rounded-2xl font-black transition-all">ارسل استفسار</button>
                    </div>
                </div>
            `).join('');
        }

        window.runSearch = () => {
            const q = document.getElementById('search-box').value.toLowerCase();
            const f = DB.units.filter(u => u.type === DB.activeCat && (u.code.toString().includes(q) || u.area.toLowerCase().includes(q)));
            renderGrid(f);
        };

        // --- 5. Lead & CRM Logic ---
        window.handleLead = (code) => {
            // Fair distribution
            DB.agents.sort((a, b) => a.load - b.load);
            const agent = DB.agents[0];
            agent.load++;
            
            DB.leads.unshift({
                id: Date.now(),
                code: code,
                agent: agent.name,
                time: new Date().toLocaleString('ar-EG')
            });

            alert(`سيتم تحويلك الآن لموظف المبيعات المسؤول: ${agent.name}`);
            window.open(`https://wa.me/201159333060?text=استفسار عن الوحدة كود: ${code}`);
        };

        // --- 6. Admin Engine ---
        window.openAdmin = () => {
            if (!DB.currentUser) document.getElementById('login-screen').style.display = 'flex';
            else document.getElementById('admin-portal').style.display = 'block';
        };

        window.tryLogin = () => {
            const u = document.getElementById('user-in').value;
            const p = document.getElementById('pass-in').value;
            const found = DB.agents.find(a => a.user === u && a.pass === p);
            
            if (found) {
                DB.currentUser = found;
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('admin-portal').style.display = 'block';
                showAdminPage('inventory');
            } else alert("بيانات غير صحيحة");
        };

        window.showAdminPage = (page) => {
            const content = document.getElementById('admin-content');
            document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
            document.getElementById(`side-${page.split('-')[0]}`).classList.add('active');

            if (page === 'inventory') {
                content.innerHTML = `
                    <div class="flex justify-between items-center mb-10">
                        <h2 class="text-4xl font-black text-gold italic">إدارة المخزون (${DB.units.length})</h2>
                        <button onclick="exportData()" class="bg-green-700 text-white px-8 py-3 rounded-xl font-bold">تصدير EXCEL</button>
                    </div>
                    <div class="space-y-4">
                        ${DB.units.map(u => `
                            <div class="bg-black/40 p-6 rounded-3xl border border-zinc-800 flex justify-between items-center">
                                <div><span class="text-gold font-black">#${u.code}</span> - <span class="text-lg font-bold">${u.area}</span></div>
                                <div class="flex gap-8 items-center">
                                    <span class="font-black">${u.price.toLocaleString()} EGP</span>
                                    <button onclick="deleteUnit(${u.id})" class="text-red-500"><i class="fa fa-trash"></i></button>
                                </div>
                            </div>
                        `).join('')}
                    </div>`;
            } else if (page === 'crm') {
                content.innerHTML = `
                    <h2 class="text-4xl font-black text-gold italic mb-10">سجل العملاء CRM</h2>
                    <div class="grid gap-4">
                        ${DB.leads.length === 0 ? '<p class="text-zinc-600">لا يوجد ليدز حالياً</p>' : 
                        DB.leads.map(l => `
                            <div class="bg-black p-6 rounded-3xl border-r-8 border-gold">
                                <h4 class="text-xl font-black">طلب استفسار عن الكود: ${l.code}</h4>
                                <p class="text-zinc-500">تم التوجيه لـ: ${l.agent} | التاريخ: ${l.time}</p>
                            </div>
                        `).join('')}
                    </div>`;
            } else if (page === 'add') {
                content.innerHTML = `
                    <h2 class="text-4xl font-black text-gold italic mb-10">إضافة وحدة جديدة</h2>
                    <div class="grid grid-cols-2 gap-6 bg-black/40 p-10 rounded-[40px] border border-zinc-800">
                        <input id="add-c" type="number" placeholder="الكود" class="input-luxury">
                        <input id="add-a" type="text" placeholder="المنطقة" class="input-luxury">
                        <input id="add-p" type="number" placeholder="السعر" class="input-luxury">
                        <select id="add-t" class="input-luxury"><option value="resale">ريسيل</option><option value="primary">برايمري</option></select>
                        <button onclick="saveNewUnit()" class="col-span-2 bg-gold text-black py-5 rounded-2xl font-black text-xl">تأكيد الإضافة</button>
                    </div>`;
            } else if (page === 'settings') {
                content.innerHTML = `
                    <h2 class="text-4xl font-black text-gold italic mb-10">إعدادات الموقع</h2>
                    <div class="bg-black/40 p-10 rounded-[40px] border border-zinc-800 max-w-2xl">
                        <label class="block text-zinc-500 text-xs font-black mb-4">السلوجان الرئيسي (Slogan)</label>
                        <textarea id="set-s" rows="5" class="input-luxury mb-8">${DB.settings.slogan}</textarea>
                        <button onclick="saveSettings()" class="bg-gold text-black px-12 py-4 rounded-xl font-black">حفظ التغييرات</button>
                    </div>`;
            }
        };

        // --- 7. Admin Operations ---
        window.saveNewUnit = () => {
            const u = {
                id: Date.now(),
                code: document.getElementById('add-c').value,
                area: document.getElementById('add-a').value,
                price: parseInt(document.getElementById('add-p').value),
                space: 150, rooms: 3,
                type: document.getElementById('add-t').value,
                img: "https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800"
            };
            DB.units.unshift(u);
            alert("تمت الإضافة!");
            showAdminPage('inventory');
        };

        window.deleteUnit = (id) => {
            if(confirm("مسح الوحدة؟")) {
                DB.units = DB.units.filter(u => u.id !== id);
                showAdminPage('inventory');
            }
        };

        window.saveSettings = () => {
            DB.settings.slogan = document.getElementById('set-s').value;
            document.getElementById('display-slogan').innerText = DB.settings.slogan;
            alert("تم التحديث!");
        };

        window.exportData = () => {
            const ws = XLSX.utils.json_to_sheet(DB.units);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, "STR_Inventory");
            XLSX.writeFile(wb, "STR_Inventory_2026.xlsx");
        };

        window.closeAll = () => {
            document.querySelectorAll('.modal-overlay').forEach(m => m.style.display = 'none');
        };

        // Start
        window.onload = initializeSystem;
    </script>
</body>
</html>
