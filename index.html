<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STR - Summit Team Real Estate | Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #d4af37; --black: #0a0a0a; --zinc: #18181b; }
        body { font-family: 'Cairo', sans-serif; background-color: var(--black); color: white; overflow-x: hidden; }
        .gold-text { color: var(--gold); }
        .bg-gold { background-color: var(--gold); color: black; }
        .tab-content { display: none; }
        .active-tab { display: block; }
        .nav-btn { cursor: pointer; transition: 0.3s; padding: 10px 15px; border-bottom: 2px solid transparent; font-weight: bold; font-size: 14px; color: #a1a1aa; }
        .nav-btn.active { border-bottom: 2px solid var(--gold); color: var(--gold); }
        .unit-card { background: var(--zinc); border: 1px solid #27272a; border-radius: 15px; overflow: hidden; transition: 0.3s; cursor: pointer; }
        .unit-card:hover { border-color: var(--gold); transform: translateY(-5px); }
        
        /* Slider & Modal Custom */
        .modal { display: none; position: fixed; z-index: 1000; inset: 0; background: rgba(0,0,0,0.98); overflow-y: auto; padding: 20px; }
        .slider-img { width: 100%; height: 300px; object-fit: cover; display: none; }
        .slider-img.active { display: block; }
        .spec-box { background: #1a1a1a; border: 1px solid #333; padding: 12px; border-radius: 10px; text-align: center; }
        
        input, select, textarea { background: #1a1a1a !important; border: 1px solid #333 !important; color: white !important; padding: 12px; border-radius: 12px; outline: none; width: 100%; }
    </style>
</head>
<body>

    <nav class="bg-black/95 border-b border-zinc-800 sticky top-0 z-50 backdrop-blur">
        <div class="container mx-auto px-4 py-3 flex flex-col md:flex-row justify-between items-center">
            <div class="flex items-center gap-4 mb-4 md:mb-0" onclick="showTab('home')" style="cursor:pointer">
                <div class="text-3xl font-black gold-text italic">STR</div>
                <input type="text" id="globalSearch" oninput="renderUnits()" placeholder="Ø¨Ø­Ø« Ø¹Ø§Ù…..." class="bg-zinc-900 border border-zinc-700 rounded-full px-4 py-1 text-sm focus:border-gold outline-none w-40 md:w-64">
            </div>
            <div class="flex flex-wrap justify-center gap-1">
                <div class="nav-btn active" onclick="showTab('home')">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
                <div class="nav-btn" onclick="showTab('about')">Ø¹Ù† Ø§Ù„Ø´Ø±ÙƒØ©</div>
                <div class="nav-btn" onclick="showTab('partners')">Ø´Ø±ÙƒØ§Ø¤Ù†Ø§</div>
                <div class="nav-btn" onclick="showTab('resale')">Ø±ÙŠØ³ÙŠÙ„</div>
                <div class="nav-btn" onclick="showTab('primary')">Ø¨Ø±Ø§ÙŠÙ…Ø±ÙŠ</div>
                <div class="nav-btn" onclick="showTab('rentals')">Ø¥ÙŠØ¬Ø§Ø± ÙÙ†Ø¯Ù‚ÙŠ</div>
                <button onclick="openAdmin()" class="bg-red-900/20 text-red-500 px-4 py-2 rounded-xl text-xs font-bold border border-red-900/30 mr-2">Ø§Ù„Ø£Ø¯Ù…Ù†</button>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-4 py-8">
        <section id="home" class="tab-content active-tab text-center py-24">
            <h1 class="text-7xl md:text-9xl font-black italic gold-text mb-4 uppercase">Summit Team</h1>
            <p id="slogan-display" class="text-zinc-400 italic text-xl md:text-2xl max-w-3xl mx-auto leading-relaxed"></p>
        </section>

        <section id="about" class="tab-content py-10"></section>

        <section id="partners" class="tab-content py-10">
            <h2 class="text-3xl gold-text text-center mb-10 font-bold italic">Ø´Ø±ÙƒØ§Ø¡ Ø§Ù„Ù†Ø¬Ø§Ø­</h2>
            <div id="partners-grid" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
        </section>

        <section id="units-section" class="tab-content">
            <div class="bg-zinc-900 p-6 rounded-2xl border border-zinc-800 mb-10 flex flex-wrap gap-4 items-center">
                <select id="filterZone" onchange="renderUnits()" class="w-40 text-xs"></select>
                <select id="filterRooms" onchange="renderUnits()" class="w-32 text-xs">
                    <option value="">Ø¹Ø¯Ø¯ Ø§Ù„ØºØ±Ù</option>
                    <option value="1">1 ØºØ±Ù</option><option value="2">2 ØºØ±Ù</option><option value="3">3 ØºØ±Ù</option><option value="4">4+ ØºØ±Ù</option>
                </select>
                <input type="number" id="filterPrice" oninput="renderUnits()" placeholder="Ø£Ù‚ØµÙ‰ Ø³Ø¹Ø±..." class="w-40 text-xs">
                <button onclick="clearFilters()" class="mr-auto text-xs text-zinc-500 border border-zinc-700 px-4 py-2 rounded-xl hover:text-white">Ù…Ø³Ø­ Ø§Ù„ÙÙ„Ø§ØªØ±</button>
            </div>
            <div id="units-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"></div>
        </section>
    </main>

    <div id="unitModal" class="modal" onclick="closeModal()">
        <div class="max-w-2xl mx-auto bg-zinc-900 rounded-3xl overflow-hidden border border-gold/30" onclick="event.stopPropagation()">
            <div id="slider-container" class="relative bg-black h-[300px]">
                <button onclick="prevImg()" class="absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 p-2 rounded-full gold-text z-10">â®</button>
                <button onclick="nextImg()" class="absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 p-2 rounded-full gold-text z-10">â¯</button>
            </div>
            <div class="bg-red-900 text-white px-6 py-3 flex justify-between font-black italic">
                <span id="m-code"></span><span>CODE</span>
            </div>
            <div class="p-6">
                <div class="grid grid-cols-2 gap-3 mb-6">
                    <div class="spec-box"><p class="text-[10px] gold-text">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</p><p id="m-address" class="text-sm font-bold"></p></div>
                    <div class="spec-box"><p class="text-[10px] gold-text">Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª</p><p id="m-specs" class="text-sm font-bold"></p></div>
                    <div class="spec-box"><p class="text-[10px] gold-text">Ø§Ù„Ù…Ø§Ù„ÙŠØ§Øª</p><p id="m-finance" class="text-sm font-bold text-green-500"></p></div>
                    <div class="spec-box"><p class="text-[10px] gold-text">Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚Ø³ÙŠØ·</p><p id="m-plan" class="text-sm font-bold"></p></div>
                </div>
                <div class="bg-black/40 p-4 rounded-xl mb-6">
                    <p id="m-notes" class="text-xs text-zinc-400 leading-relaxed"></p>
                </div>
                <button id="wa-btn" class="w-full bg-green-600 py-4 rounded-2xl font-black flex items-center justify-center gap-3 text-lg hover:bg-green-500 transition">
                    <i class="fab fa-whatsapp"></i> ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø³ØªØ´Ø§Ø± Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠ
                </button>
            </div>
        </div>
    </div>

    <div id="adminModal" class="modal">
        <div class="flex flex-col md:flex-row min-h-screen">
            <aside class="w-full md:w-64 p-6 border-l border-zinc-800">
                <h2 class="text-2xl font-black gold-text mb-10 italic">STR ADMIN</h2>
                <div class="space-y-2">
                    <button onclick="renderAdmin('inv')" class="w-full text-right p-4 rounded-xl hover:bg-zinc-800">ğŸ“¦ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</button>
                    <button onclick="renderAdmin('crm')" class="w-full text-right p-4 rounded-xl hover:bg-zinc-800">ğŸ‘¥ Ø³Ø¬Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª</button>
                    <button onclick="renderAdmin('add')" class="w-full text-right p-4 rounded-xl bg-green-900/20 text-green-500">â• Ø¥Ø¶Ø§ÙØ© ÙˆØ­Ø¯Ø©</button>
                    <button onclick="renderAdmin('set')" class="w-full text-right p-4 rounded-xl hover:bg-zinc-800">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
                </div>
                <button onclick="closeAdmin()" class="mt-20 w-full p-4 text-zinc-500 border border-zinc-800 rounded-xl font-bold">Ø®Ø±ÙˆØ¬ Ù„Ù„Ù…ÙˆÙ‚Ø¹</button>
            </aside>
            <main id="admin-view" class="flex-1 p-8 md:p-16"></main>
        </div>
    </div>

    <script>
        const state = {
            slogan: "STR - Ù‚Ù…Ø© Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª ÙÙŠ Ù…ØµØ±. Ù†ÙˆÙØ± Ù„Ùƒ Ø£ÙØ¶Ù„ Ø§Ù„ÙØ±Øµ Ø§Ù„Ø³ÙƒÙ†ÙŠØ© ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© Ø¨Ø£Ø¹Ù„Ù‰ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¬ÙˆØ¯Ø© | 2026",
            units: [],
            leads: [],
            team: [{ name: "ÙØ±ÙŠÙ‚ Ù…Ø¨ÙŠØ¹Ø§Øª A", load: 0 }, { name: "ÙØ±ÙŠÙ‚ Ù…Ø¨ÙŠØ¹Ø§Øª B", load: 0 }],
            partners: ["Ø·Ù„Ø¹Øª Ù…ØµØ·ÙÙ‰", "Ø¥Ø¹Ù…Ø§Ø±", "Ø³ÙˆØ¯ÙŠÙƒ", "Ù†ÙŠÙˆ Ø¬ÙŠØ²Ø©", "Ù…Ø§ÙˆÙ†ØªÙ† ÙÙŠÙˆ", "Ø¨Ø§Ù„Ù… Ù‡ÙŠÙ„Ø²", "Ø£ÙˆØ±Ø§", "Ø³ÙŠØªÙŠ Ø¥ÙŠØ¯Ø¬"],
            areas: ["Ù…Ø¯ÙŠÙ†ØªÙŠ", "Ø§Ù„Ø±Ø­Ø§Ø¨", "Ø§Ù„Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©", "Ø§Ù„ØªØ¬Ù…Ø¹", "Ø§Ù„Ø³Ø§Ø­Ù„ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ"],
            currentIdx: 0
        };

        function init() {
            const cats = ['resale', 'primary', 'rentals'];
            for(let i=0; i<30; i++){
                const cat = cats[Math.floor(i/10)];
                state.units.push({
                    id: Date.now() + i,
                    code: (cat === 'resale' ? 7000 : (cat === 'primary' ? 8000 : 9000)) + i,
                    type: cat,
                    price: (i + 1) * 900000,
                    zone: state.areas[i % state.areas.length],
                    space: 100 + (i * 5),
                    rooms: (i % 3) + 1,
                    downPayment: (i + 1) * 100000,
                    installments: 7,
                    waClicks: Math.floor(Math.random() * 15),
                    imgs: ["https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800", "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=800"]
                });
            }
            document.getElementById('slogan-display').innerText = state.slogan;
            document.getElementById('filterZone').innerHTML = '<option value="">ÙƒÙ„ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚</option>' + state.areas.map(a => `<option value="${a}">${a}</option>`).join('');
            renderPartners();
        }

        function showTab(tab) {
            document.querySelectorAll('.tab-content').forEach(s => s.classList.remove('active-tab'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            
            if(['resale', 'primary', 'rentals'].includes(tab)) {
                state.currentCat = tab;
                document.getElementById('units-section').classList.add('active-tab');
                renderUnits();
            } else {
                document.getElementById(tab).classList.add('active-tab');
                if(tab === 'about') renderAbout();
            }
            const btn = Array.from(document.querySelectorAll('.nav-btn')).find(b => b.innerText.toLowerCase().includes(tab.slice(0,3)));
            if(btn) btn.classList.add('active');
        }

        function renderUnits() {
            const grid = document.getElementById('units-grid');
            const search = document.getElementById('globalSearch').value.toLowerCase();
            const maxPrice = document.getElementById('filterPrice').value;
            const rooms = document.getElementById('filterRooms').value;
            const zone = document.getElementById('filterZone').value;

            const filtered = state.units.filter(u => 
                u.type === state.currentCat &&
                (u.code.toString().includes(search) || u.zone.includes(search)) &&
                (!maxPrice || u.price <= maxPrice) &&
                (!rooms || u.rooms == rooms) &&
                (!zone || u.zone === zone)
            );

            grid.innerHTML = filtered.map(u => `
                <div class="unit-card" onclick="openUnit(${u.id})">
                    <img src="${u.imgs[0]}" class="h-44 w-full object-cover">
                    <div class="p-5">
                        <div class="flex justify-between text-[10px] gold-text mb-2 font-bold"><span>CODE: ${u.code}</span><span>${u.zone}</span></div>
                        <h4 class="text-xl font-black mb-1">${u.price.toLocaleString()} EGP</h4>
                        <p class="text-[10px] text-zinc-500">${u.rooms} ØºØ±Ù | ${u.space} Ù…Â²</p>
                    </div>
                </div>
            `).join('');
        }

        function openUnit(id) {
            const u = state.units.find(u => u.id === id);
            state.activeUnit = u;
            state.currentIdx = 0;
            
            document.getElementById('slider-container').innerHTML = u.imgs.map((img, i) => `<img src="${img}" class="slider-img ${i===0?'active':''}">`).join('') + 
                `<button onclick="prevImg()" class="absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 p-2 rounded-full gold-text">â®</button>
                 <button onclick="nextImg()" class="absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 p-2 rounded-full gold-text">â¯</button>`;
            
            document.getElementById('m-code').innerText = u.code;
            document.getElementById('m-address').innerText = u.zone;
            document.getElementById('m-specs').innerText = `${u.rooms} ØºØ±Ù - ${u.space} Ù…Â²`;
            document.getElementById('m-finance').innerText = `Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${u.price.toLocaleString()} EGP`;
            document.getElementById('m-plan').innerText = `Ù…Ù‚Ø¯Ù…: ${u.downPayment.toLocaleString()} | ØªÙ‚Ø³ÙŠØ· ${u.installments} Ø³Ù†ÙˆØ§Øª`;
            document.getElementById('m-notes').innerText = "Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ­Ø¯Ø© ØªØ®Ø¶Ø¹ Ù„Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„ÙØ§Ø¦Ù‚Ø© Ù…Ù† STRØŒ Ø§Ø³ØªÙ„Ø§Ù… ÙÙˆØ±ÙŠ Ø£Ùˆ ØªØ¹Ø§Ù‚Ø¯ Ø¨Ù†Ø¸Ø§Ù… Ù…Ø±ÙŠØ­.";
            
            document.getElementById('unitModal').style.display = 'block';
            document.getElementById('wa-btn').onclick = () => handleWA(u);
        }

        function nextImg() {
            const imgs = document.querySelectorAll('.slider-img');
            imgs[state.currentIdx].classList.remove('active');
            state.currentIdx = (state.currentIdx + 1) % imgs.length;
            imgs[state.currentIdx].classList.add('active');
        }

        function prevImg() {
            const imgs = document.querySelectorAll('.slider-img');
            imgs[state.currentIdx].classList.remove('active');
            state.currentIdx = (state.currentIdx - 1 + imgs.length) % imgs.length;
            imgs[state.currentIdx].classList.add('active');
        }

        function handleWA(u) {
            u.waClicks++;
            state.team.sort((a,b) => a.load - b.load);
            state.team[0].load++;
            state.leads.unshift({ code: u.code, agent: state.team[0].name, time: new Date().toLocaleString('ar-EG') });
            window.open(`https://wa.me/201159333060?text=Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ø§Ù„ÙˆØ­Ø¯Ø© ÙƒÙˆØ¯: ${u.code}`);
        }

        function renderAdmin(page) {
            const view = document.getElementById('admin-view');
            if(page === 'inv') {
                view.innerHTML = `<div class="flex justify-between items-center mb-10"><h2 class="text-3xl font-bold gold-text">Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h2><button onclick="exportExcel()" class="bg-green-700 px-6 py-2 rounded-xl font-bold">ØªØµØ¯ÙŠØ± EXCEL</button></div>
                <div class="grid gap-3">${state.units.map(u => `<div class="p-4 bg-zinc-900 rounded-xl flex justify-between items-center"><span>#${u.code} - ${u.zone}</span><span class="text-xs gold-text">ÙˆØ§ØªØ³Ø§Ø¨: ${u.waClicks}</span><button onclick="deleteUnit(${u.id})" class="text-red-500">Ø­Ø°Ù</button></div>`).join('')}</div>`;
            } else if(page === 'crm') {
                view.innerHTML = `<h2 class="text-3xl font-bold gold-text mb-10 italic">Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h2>
                <div class="space-y-4">${state.leads.map(l => `<div class="p-4 bg-zinc-900 rounded-xl border-r-4 border-gold"><p>ÙƒÙˆØ¯ ${l.code} -> ${l.agent}</p><small class="text-zinc-500">${l.time}</small></div>`).join('')}</div>`;
            } else if(page === 'add') {
                view.innerHTML = `<h2 class="text-3xl font-bold gold-text mb-10">Ø¥Ø¶Ø§ÙØ© ÙˆØ­Ø¯Ø©</h2>
                <div class="grid md:grid-cols-2 gap-4 max-w-xl"><input id="ac" placeholder="Ø§Ù„ÙƒÙˆØ¯"><input id="az" placeholder="Ø§Ù„Ù…Ù†Ø·Ù‚Ø©"><input id="ap" placeholder="Ø§Ù„Ø³Ø¹Ø±"><input id="ad" placeholder="Ø§Ù„Ù…Ù‚Ø¯Ù…"><select id="at"><option value="resale">Ø±ÙŠØ³ÙŠÙ„</option><option value="primary">Ø¨Ø±Ø§ÙŠÙ…Ø±ÙŠ</option></select><button onclick="saveUnit()" class="md:col-span-2 bg-gold py-4 rounded-xl font-black">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…ÙˆÙ‚Ø¹</button></div>`;
            }
        }

        function exportExcel() {
            const ws = XLSX.utils.json_to_sheet(state.units);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, "Inventory");
            XLSX.writeFile(wb, "STR_Full_Report_2026.xlsx");
        }

        function renderPartners() {
            document.getElementById('partners-grid').innerHTML = state.partners.map(p => `
                <div class="p-6 bg-zinc-900 border border-zinc-800 rounded-xl text-center hover:border-gold transition">
                    <i class="fa fa-building gold-text mb-2 text-xl"></i><p class="text-xs font-bold">${p}</p>
                </div>`).join('');
        }

        function closeModal() { document.getElementById('unitModal').style.display = 'none'; }
        function openAdmin() { if(prompt("ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±:") === "str2026") { document.getElementById('adminModal').style.display = 'block'; renderAdmin('inv'); } }
        function closeAdmin() { document.getElementById('adminModal').style.display = 'none'; }
        window.onload = init;
    </script>
</body>
</html>
